query getProducts(
  $first: Int = 24
  $after: String = ""
  $where: RootQueryToProductConnectionWhereArgs = {}
) {
  products(first: $first, after: $after, where: $where) {
    pageInfo {
      hasNextPage
      endCursor
    }
    nodes {
      id
      databaseId
      ... on Product {
        averageRating
        slug
        description
        name
        onSale
        status
        totalSales
        reviewCount
        shortDescription
        purchasable
        catalogVisibility
      }
      ... on ProductWithPricing {
        price
        regularPrice
        salePrice
      }
      ... on InventoriedProduct {
        stockStatus
        stockQuantity
      }
      image {
        ...Image
      }
      ... on Product {
        galleryImages {
          nodes {
            ...Image
          }
        }
        productCategories {
          nodes {
            id
            slug
            name
          }
        }
      }
    }
  }
}

fragment Image on MediaItem {
  id
  sourceUrl(size: LARGE)
  altText
}
